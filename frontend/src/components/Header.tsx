import { useState } from 'react';

export function Header() {
  const [isDarkMode, setIsDarkMode] = useState(
    window.matchMedia('(prefers-color-scheme: dark)').matches
  );

  const toggleDarkMode = () => {
    const newMode = !isDarkMode;
    setIsDarkMode(newMode);
    
    if (newMode) {
      document.documentElement.classList.add('dark');
    } else {
      document.documentElement.classList.remove('dark');
    }
  };

  return (
    <header className="flex justify-between items-center py-4 px-6 bg-white dark:bg-gray-800 shadow-sm">
      <div className="flex items-center space-x-3">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="40"
          height="40"
          viewBox="0 0 24 24"
          className="text-blue-600"
        >
          <path
            fill="currentColor"
            d="M13.983 11.317c.211 0 .41-.095.543-.257a.93.93 0 0 0 .174-.68a.767.767 0 0 0-.315-.51a.644.644 0 0 0-.598-.05a.748.748 0 0 0-.417.44a.927.927 0 0 0 .056.755c.134.19.346.302.557.302m-2.294 0a.673.673 0 0 0 .485-.216a.868.868 0 0 0 .213-.663a.768.768 0 0 0-.328-.513a.667.667 0 0 0-.609-.054a.756.756 0 0 0-.43.438a.911.911 0 0 0 .078.743a.646.646 0 0 0 .591.265m-2.28 0a.65.65 0 0 0 .485-.213a.85.85 0 0 0 .21-.652a.768.768 0 0 0-.328-.524a.643.643 0 0 0-.598-.057a.734.734 0 0 0-.417.438a.901.901 0 0 0 .067.746a.619.619 0 0 0 .581.262m-2.293 0a.633.633 0 0 0 .444-.19a.856.856 0 0 0 .23-.651a.777.777 0 0 0-.318-.527a.66.66 0 0 0-.609-.054a.748.748 0 0 0-.427.435a.878.878 0 0 0 .06.737a.646.646 0 0 0 .62.25m-2.321 0a.673.673 0 0 0 .485-.216a.878.878 0 0 0 .213-.663a.78.78 0 0 0-.325-.513a.66.66 0 0 0-.609-.054a.748.748 0 0 0-.43.438a.911.911 0 0 0 .078.743a.646.646 0 0 0 .588.265M5.15 9.582a.66.66 0 0 0 .472-.196a.878.878 0 0 0 .22-.663a.755.755 0 0 0-.324-.513a.66.66 0 0 0-.609-.054a.745.745 0 0 0-.43.438a.911.911 0 0 0 .078.743a.633.633 0 0 0 .593.245m2.328 0a.66.66 0 0 0 .472-.196a.856.856 0 0 0 .216-.663a.765.765 0 0 0-.315-.513a.66.66 0 0 0-.609-.054a.76.76 0 0 0-.438.438a.901.901 0 0 0 .078.743a.66.66 0 0 0 .596.245m2.321 0a.643.643 0 0 0 .476-.196a.856.856 0 0 0 .216-.663a.768.768 0 0 0-.324-.513a.66.66 0 0 0-.609-.054a.748.748 0 0 0-.43.438a.888.888 0 0 0 .078.743a.653.653 0 0 0 .593.245m2.318 0a.65.65 0 0 0 .485-.196a.888.888 0 0 0 .213-.663a.768.768 0 0 0-.324-.513a.66.66 0 0 0-.609-.054a.748.748 0 0 0-.427.438a.888.888 0 0 0 .078.743a.646.646 0 0 0 .584.245m2.321 0a.653.653 0 0 0 .485-.196a.878.878 0 0 0 .209-.663a.758.758 0 0 0-.318-.513a.649.649 0 0 0-.609-.054a.74.74 0 0 0-.427.438a.888.888 0 0 0 .078.743a.636.636 0 0 0 .582.245m2.384-1.735a.646.646 0 0 0-.609-.054a.748.748 0 0 0-.434.438a.888.888 0 0 0 .081.743a.63.63 0 0 0 .582.245a.663.663 0 0 0 .485-.196a.878.878 0 0 0 .213-.663a.774.774 0 0 0-.318-.513M4.126 21.722c-.776.08-1.556.073-2.332 0c-.095-.01-.186-.05-.257-.117a.62.62 0 0 1-.166-.25a1.463 1.463 0 0 1-.078-.413c-.02-.169-.02-.328 0-.497v-8.456c0-1.111.923-2.024 2.052-2.024h19.075c1.13 0 2.052.913 2.052 2.024v8.456a1.53 1.53 0 0 1-.078.497a1.28 1.28 0 0 1-.159.413a.598.598 0 0 1-.264.203a2.49 2.49 0 0 1-.471.067c-1.015.01-2.031.01-3.042 0a.673.673 0 0 1-.514-.213c-.138-.149-.201-.348-.174-.544c.03-.2.142-.379.315-.498a.66.66 0 0 1 .57-.054c.788.02 1.58.02 2.368 0c.19 0 .298-.06.298-.261V12.05c0-.01-.004-.016-.01-.024H1.709c0 .01-.01.016-.01.024v8.406c0 .2.112.26.301.261c.548.013 1.096.013 1.641 0a.687.687 0 0 1 .547.209c.135.15.2.348.177.544c-.026.199-.138.381-.308.5a.65.65 0 0 1-.609.054a.96.96 0 0 0 .678-.302Z"
          />
        </svg>
        <h1 className="text-2xl font-bold text-gray-900 dark:text-white">GenAI Chat</h1>
      </div>
      <div className="flex items-center">
        <button
          onClick={toggleDarkMode}
          className="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none"
          aria-label="Toggle dark mode"
        >
          {isDarkMode ? (
            <svg 
              xmlns="http://www.w3.org/2000/svg" 
              width="24" 
              height="24" 
              viewBox="0 0 24 24" 
              fill="none" 
              stroke="currentColor" 
              strokeWidth="2" 
              strokeLinecap="round" 
              strokeLinejoin="round" 
              className="text-yellow-300"
            >
              <circle cx="12" cy="12" r="5"></circle>
              <line x1="12" y1="1" x2="12" y2="3"></line>
              <line x1="12" y1="21" x2="12" y2="23"></line>
              <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
              <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
              <line x1="1" y1="12" x2="3" y2="12"></line>
              <line x1="21" y1="12" x2="23" y2="12"></line>
              <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
              <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
            </svg>
          ) : (
            <svg 
              xmlns="http://www.w3.org/2000/svg" 
              width="24" 
              height="24" 
              viewBox="0 0 24 24" 
              fill="none" 
              stroke="currentColor" 
              strokeWidth="2" 
              strokeLinecap="round" 
              strokeLinejoin="round" 
              className="text-gray-700"
            >
              <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            </svg>
          )}
        </button>
      </div>
    </header>
  );
}
